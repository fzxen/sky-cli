"use strict";require("core-js/modules/es.symbol"),require("core-js/modules/es.array.index-of"),require("core-js/modules/es.date.to-string"),require("core-js/modules/es.function.name"),require("core-js/modules/es.object.assign"),require("core-js/modules/es.object.keys"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.promise"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.regexp.to-string"),require("core-js/modules/es.string.match"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCliConfig=exports.getInitQuestions=exports.isBaseType=exports.getType=exports.updateJsonFile=exports.gitSources=exports.getCreateQuestions=exports.isNone=exports.isFoldExist=void 0,require("regenerator-runtime/runtime");var _fs=_interopRequireDefault(require("fs")),_webpackMerge=_interopRequireDefault(require("webpack-merge")),_webpackChain=_interopRequireDefault(require("webpack-chain"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],0<=t.indexOf(r)||(o[r]=e[r]);return o}function asyncGeneratorStep(e,t,r,n,o,s,i){try{var u=e[s](i),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(n,o)}function _asyncToGenerator(u){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=u.apply(e,i);function o(e){asyncGeneratorStep(n,t,r,o,s,"next",e)}function s(e){asyncGeneratorStep(n,t,r,o,s,"throw",e)}o(void 0)})}}var isFoldExist=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){_fs.default.existsSync(r)?t(new Error("".concat(r," has existed"))):e()}));case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}();exports.isFoldExist=isFoldExist;var isNone=function(e){return null==e};exports.isNone=isNone;var getCreateQuestions=function(e){return[{type:"list",name:"frame",message:"please choose this project template",choices:["vue","react"]},{type:"input",name:"name",message:"Please enter the project name: ",default:e.name,validate:function(e){return!!e||"you must provide the name"}},{type:"input",name:"description",message:"Please enter the project description: ",validate:function(e){return!!e||"you must provide the description"}},{type:"input",name:"author",message:"Please enter the author name: ",default:"fanzhongxu",validate:function(e){return!!e||"you must provide the author"}}]};exports.getCreateQuestions=getCreateQuestions;var gitSources={vue:{url:"direct:https://gitee.com/zxffan/templates.git#vue-spa"},react:{url:""},electron:{url:""}};exports.gitSources=gitSources;var updateJsonFile=function(n,o){return new Promise(function(e){if(_fs.default.existsSync(n)){var t=_fs.default.readFileSync(n).toString(),r=JSON.parse(t);Object.assign(r,o),_fs.default.writeFileSync(n,JSON.stringify(r,null,"\t")),e()}})};exports.updateJsonFile=updateJsonFile;var getType=function(e){return Object.prototype.toString.call(e).match(/\s(\w*)]$/)[1]};exports.getType=getType;var isBaseType=function(e){return 0<=["number","string","boolean","undefined","null"].indexOf(getType(e))};exports.isBaseType=isBaseType;var getInitQuestions=function(){return[{type:"confirm",message:"Do you need initialize a git repository",name:"git",default:!1}]};exports.getInitQuestions=getInitQuestions;var getCliConfig=function(e,t){var r,n,o,s,i,u,a,c,p=1<arguments.length&&void 0!==t?t:{},l={configureWebpack:{},chainWebpack:function(){},devServer:{},css:{loaderOption:{scss:{prependData:[]},less:{prependData:[]}}},analysis:!1};return r=require(e),n=require("".concat(process.cwd(),"/cli.config.js")),o=(0,_webpackMerge.default)(l,n),s=o.configureWebpack,i=o.chainWebpack,u=o.devServer,a=_objectWithoutProperties(o,["configureWebpack","chainWebpack","devServer"]),c=new _webpackChain.default,i(c),(0,_webpackMerge.default)(r(Object.assign(a,p)),s,c.toConfig(),{devServer:u})};exports.getCliConfig=getCliConfig;