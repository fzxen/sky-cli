"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logSymbols=_interopRequireDefault(require("log-symbols")),_chalk=_interopRequireDefault(require("chalk")),_ora=_interopRequireDefault(require("ora")),_inquirer=_interopRequireDefault(require("inquirer")),_downloadGitRepo=_interopRequireDefault(require("download-git-repo")),_util=require("../util");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var getCreateQuestions=function(e){return[{type:"list",name:"frame",message:"please choose this project template",choices:["vue","react"]},{type:"input",name:"name",message:"Please enter the project name: ",default:e,validate:function(e){return!!e||"you must provide the name"}},{type:"input",name:"description",message:"Please enter the project description: ",validate:function(e){return!!e||"you must provide the description"}},{type:"input",name:"author",message:"Please enter the author name: ",default:"fanzhongxu",validate:function(e){return!!e||"you must provide the author"}}]};function updatePackage(e){var t=e.name;return(0,_util.updateJsonFile)(t+"/package.json",e)}function download(u){return new Promise(function(t,o){var e=u.name,a=u.frame,n=(0,_ora.default)();n.start("downloading...");var r=_util.gitSources[a];r.url||(n.fail(e+" is not provided for now"),o(new Error(e+" is not provided for now"))),(0,_downloadGitRepo.default)(r.url,e,{clone:!0},function(e){e?(n.fail("download failed, please check your network"),o(e)):(n.succeed("download successfully"),updatePackage(u).then(function(){console.log(_logSymbols.default.success,_chalk.default.green("package has updated completely")),t()}))})})}var _default=function(t){(0,_util.isNone)(t)?console.log(_logSymbols.default.error,_chalk.default.red("please input your projectName")):(0,_util.isFoldExist)(t).then(function(){_inquirer.default.prompt(getCreateQuestions(t)).then(function(e){download(e).then(function(){console.log(_logSymbols.default.success,[_chalk.default.green("app has been created successfully\n"),"\tcd "+t,"\t sli init","\t sli dev"].join("\n"))}).catch(function(e){console.log(e)})}).catch(function(e){console.log(_logSymbols.default.error,_chalk.default.red(e.message))})}).catch(function(e){console.log(_logSymbols.default.error,_chalk.default.red(e.message))})};exports.default=_default;